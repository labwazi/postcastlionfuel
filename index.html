<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LionFuel Student Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3a86ff;
            --primary-dark: #2667cc;
            --secondary: #8338ec;
            --success: #38b000;
            --warning: #ff9e00;
            --danger: #ff006e;
            --info: #00bbf9;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --border-radius: 10px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        .dark-theme {
            --dark: #f8f9fa;
            --light: #1a1a2e;
            --light-gray: #2d3047;
            --gray: #adb5bd;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            transition: var(--transition);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.2rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo i {
            font-size: 2rem;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .stat-1 .stat-icon { background: rgba(58, 134, 255, 0.1); color: var(--primary); }
        .stat-2 .stat-icon { background: rgba(56, 176, 0, 0.1); color: var(--success); }
        .stat-3 .stat-icon { background: rgba(255, 158, 0, 0.1); color: var(--warning); }
        .stat-4 .stat-icon { background: rgba(255, 0, 110, 0.1); color: var(--danger); }

        .stat-info h3 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .stat-info p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Main Content Layout */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 1.8rem;
            box-shadow: var(--box-shadow);
            margin-bottom: 25px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 1rem;
        }

        .card-header h2 {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .card-header i {
            font-size: 1.2rem;
        }

        /* Form Elements */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            background: var(--light);
            color: var(--dark);
            font-size: 1rem;
            transition: var(--transition);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        .btn-icon {
            padding: 10px;
            width: 40px;
            height: 40px;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        th {
            background: var(--light-gray);
            color: var(--dark);
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        tr:hover {
            background: rgba(58, 134, 255, 0.05);
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-paid {
            background: rgba(56, 176, 0, 0.15);
            color: var(--success);
        }

        .status-pending {
            background: rgba(255, 158, 0, 0.15);
            color: var(--warning);
        }

        .status-overdue {
            background: rgba(255, 0, 110, 0.15);
            color: var(--danger);
        }

        .actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        /* Session Calendar */
        .calendar-container {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 30px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .calendar-day {
            background: var(--light-gray);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }

        .calendar-date {
            background: var(--light);
            padding: 15px 10px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            min-height: 80px;
        }

        .calendar-date:hover {
            background: rgba(58, 134, 255, 0.1);
        }

        .calendar-date.has-session {
            background: rgba(56, 176, 0, 0.1);
            border: 2px solid var(--success);
        }

        .calendar-date.today {
            background: var(--primary);
            color: white;
        }

        .session-dot {
            width: 8px;
            height: 8px;
            background: var(--info);
            border-radius: 50%;
            margin: 5px auto 0;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--light);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--light-gray);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        /* Invoice */
        .invoice {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            color: #333;
        }

        .invoice-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .invoice-body table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .invoice-body th {
            background: #f1f1f1;
        }

        .invoice-body td, .invoice-body th {
            padding: 12px;
            border: 1px solid #ddd;
        }

        .invoice-total {
            text-align: right;
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 20px;
        }

        /* Search and Filters */
        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .search-box input {
            padding-left: 45px;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1100;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast-success {
            background: var(--success);
        }

        .toast-error {
            background: var(--danger);
        }

        .toast-info {
            background: var(--info);
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-3 {
            margin-bottom: 1rem;
        }

        .mb-4 {
            margin-bottom: 1.5rem;
        }

        .mt-3 {
            margin-top: 1rem;
        }

        .mt-4 {
            margin-top: 1.5rem;
        }

        .d-flex {
            display: flex;
        }

        .align-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.9rem;
            }

            .calendar-date {
                padding: 8px 5px;
                min-height: 60px;
            }

            .search-container {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <div>
                    <div>LionFuel</div>
                    <div style="font-size: 1rem; font-weight: normal;">Student Management System</div>
                </div>
            </div>
            <div class="header-controls">
                <div id="currentDateTime" style="font-weight: 600;"></div>
                <button class="btn btn-primary" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i> Theme
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Dashboard Stats -->
        <div class="dashboard-stats">
            <div class="stat-card stat-1">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalStudents">0</h3>
                    <p>Total Students</p>
                </div>
            </div>
            <div class="stat-card stat-2">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="paidStudents">0</h3>
                    <p>Paid Fees</p>
                </div>
            </div>
            <div class="stat-card stat-3">
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-info">
                    <h3 id="pendingStudents">0</h3>
                    <p>Pending Fees</p>
                </div>
            </div>
            <div class="stat-card stat-4">
                <div class="stat-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="overdueStudents">0</h3>
                    <p>Overdue Fees</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Add Student Form -->
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-user-plus"></i> Add New Student</h2>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" placeholder="Enter full name">
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" placeholder="student@example.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" placeholder="+1 (123) 456-7890">
                    </div>
                    <div class="form-group">
                        <label for="joinDate">Join Date *</label>
                        <input type="date" id="joinDate">
                    </div>
                    <div class="form-group">
                        <label for="course">Course *</label>
                        <select id="course">
                            <option value="">Select Course</option>
                            <option value="Web Development">Web Development</option>
                            <option value="Data Science">Data Science</option>
                            <option value="Digital Marketing">Digital Marketing</option>
                            <option value="UI/UX Design">UI/UX Design</option>
                            <option value="Business Analytics">Business Analytics</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount ($) *</label>
                        <input type="number" id="amount" placeholder="500" min="0" step="10">
                    </div>
                    <div class="form-group">
                        <label for="paymentMethod">Payment Method</label>
                        <select id="paymentMethod">
                            <option value="Bank Transfer">Bank Transfer</option>
                            <option value="Credit Card">Credit Card</option>
                            <option value="PayPal">PayPal</option>
                            <option value="Cash">Cash</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="paymentStatus">Payment Status *</label>
                        <select id="paymentStatus">
                            <option value="Paid">Paid</option>
                            <option value="Pending">Pending</option>
                            <option value="Partial">Partial Payment</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dueDate">Due Date</label>
                        <input type="date" id="dueDate">
                    </div>
                </div>
                <div class="form-group">
                    <label for="notes">Additional Notes</label>
                    <textarea id="notes" rows="3" placeholder="Any additional information about the student..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="addStudent()">
                    <i class="fas fa-plus"></i> Add Student
                </button>
            </div>

            <!-- Session Management -->
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-calendar-alt"></i> Schedule Session</h2>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="sessionStudent">Student *</label>
                        <select id="sessionStudent">
                            <option value="">Select Student</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sessionDate">Date *</label>
                        <input type="date" id="sessionDate">
                    </div>
                    <div class="form-group">
                        <label for="sessionTime">Time *</label>
                        <input type="time" id="sessionTime">
                    </div>
                    <div class="form-group">
                        <label for="sessionDuration">Duration (min)</label>
                        <select id="sessionDuration">
                            <option value="30">30 minutes</option>
                            <option value="45">45 minutes</option>
                            <option value="60" selected>60 minutes</option>
                            <option value="90">90 minutes</option>
                            <option value="120">120 minutes</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="sessionNotes">Session Notes</label>
                    <textarea id="sessionNotes" rows="2" placeholder="Topic, materials needed, etc..."></textarea>
                </div>
                <div class="d-flex justify-between">
                    <button class="btn btn-success" onclick="scheduleSession()">
                        <i class="fas fa-calendar-plus"></i> Schedule Session
                    </button>
                    <button class="btn btn-primary" onclick="generateSessionMessage()">
                        <i class="fas fa-comment"></i> Generate Message
                    </button>
                </div>
                
                <!-- Session Message Output -->
                <div id="sessionMessage" class="hidden mt-3">
                    <div class="card-header">
                        <h3><i class="fas fa-envelope"></i> Session Notification</h3>
                        <button class="btn btn-sm btn-primary" onclick="copySessionMessage()">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                    <div id="messageContent" class="output" style="white-space: pre-wrap; padding: 15px; background: var(--light-gray); border-radius: 8px;"></div>
                </div>
            </div>
        </div>

        <!-- Search and Filter -->
        <div class="search-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search students by name, email, or course...">
            </div>
            <div class="d-flex gap-2">
                <select id="filterStatus" onchange="filterStudents()">
                    <option value="all">All Statuses</option>
                    <option value="Paid">Paid</option>
                    <option value="Pending">Pending</option>
                    <option value="Partial">Partial</option>
                </select>
                <select id="filterCourse" onchange="filterStudents()">
                    <option value="all">All Courses</option>
                    <option value="Web Development">Web Development</option>
                    <option value="Data Science">Data Science</option>
                    <option value="Digital Marketing">Digital Marketing</option>
                </select>
                <button class="btn btn-primary" onclick="exportData()">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </div>

        <!-- Students Table -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-users"></i> Students List</h2>
                <div>
                    <span id="studentCount">0</span> students
                </div>
            </div>
            <div class="table-container">
                <table id="studentsTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Course</th>
                            <th>Join Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Due Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <!-- Students will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Calendar Section -->
        <div class="calendar-container">
            <div class="calendar-header">
                <h2><i class="fas fa-calendar"></i> Session Calendar</h2>
                <div class="d-flex gap-2">
                    <button class="btn btn-sm btn-primary" onclick="prevMonth()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h3 id="currentMonth">June 2023</h3>
                    <button class="btn btn-sm btn-primary" onclick="nextMonth()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            <div class="calendar-grid">
                <div class="calendar-day">Sun</div>
                <div class="calendar-day">Mon</div>
                <div class="calendar-day">Tue</div>
                <div class="calendar-day">Wed</div>
                <div class="calendar-day">Thu</div>
                <div class="calendar-day">Fri</div>
                <div class="calendar-day">Sat</div>
                <!-- Calendar dates will be generated by JavaScript -->
            </div>
        </div>

        <!-- Upcoming Sessions -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-clock"></i> Upcoming Sessions</h2>
            </div>
            <div class="table-container">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Duration</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="sessionsTableBody">
                        <!-- Sessions will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>© 2023 LionFuel Student Management System. All rights reserved.</p>
            <p>Designed for educational institutions and training centers</p>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Student Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user"></i> Student Profile</h2>
                <button class="close-modal" onclick="closeModal('profileModal')">&times;</button>
            </div>
            <div class="modal-body" id="profileContent">
                <!-- Profile content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal('profileModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div class="modal" id="invoiceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-file-invoice-dollar"></i> Invoice</h2>
                <button class="close-modal" onclick="closeModal('invoiceModal')">&times;</button>
            </div>
            <div class="modal-body" id="invoiceContent">
                <!-- Invoice content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="printInvoice()">
                    <i class="fas fa-print"></i> Print Invoice
                </button>
                <button class="btn" onclick="closeModal('invoiceModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Student Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Edit Student</h2>
                <button class="close-modal" onclick="closeModal('editModal')">&times;</button>
            </div>
            <div class="modal-body" id="editContent">
                <!-- Edit form will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Operation completed successfully!</span>
    </div>

    <script>
        // Initialize data
        let students = JSON.parse(localStorage.getItem("lionfuel_students")) || [];
        let sessions = JSON.parse(localStorage.getItem("lionfuel_sessions")) || [];
        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();

        // DOM Elements
        const studentsTableBody = document.getElementById('studentsTableBody');
        const sessionsTableBody = document.getElementById('sessionsTableBody');
        const sessionStudentSelect = document.getElementById('sessionStudent');
        const searchInput = document.getElementById('searchInput');
        const filterStatus = document.getElementById('filterStatus');
        const filterCourse = document.getElementById('filterCourse');

        // Initialize the application
        function init() {
            updateDateTime();
            setInterval(updateDateTime, 1000);
            renderStudents();
            renderSessions();
            updateStats();
            populateStudentDropdown();
            generateCalendar();
            
            // Load sample data if empty
            if (students.length === 0) {
                loadSampleData();
            }
            
            // Add event listener for search
            searchInput.addEventListener('input', filterStudents);
        }

        // Update date and time display
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            document.getElementById('currentDateTime').textContent = now.toLocaleDateString('en-US', options);
        }

        // Toggle dark/light theme
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const themeBtn = document.querySelector('button[onclick="toggleTheme()"]');
            const icon = themeBtn.querySelector('i');
            if (document.body.classList.contains('dark-theme')) {
                icon.className = 'fas fa-sun';
                showToast('Dark theme activated', 'info');
            } else {
                icon.className = 'fas fa-moon';
                showToast('Light theme activated', 'info');
            }
        }

        // Add a new student
        function addStudent() {
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const joinDate = document.getElementById('joinDate').value;
            const course = document.getElementById('course').value;
            const amount = document.getElementById('amount').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const paymentStatus = document.getElementById('paymentStatus').value;
            const dueDate = document.getElementById('dueDate').value;
            const notes = document.getElementById('notes').value.trim();

            // Validation
            if (!name || !joinDate || !course || !amount) {
                showToast('Please fill in all required fields (*)', 'error');
                return;
            }

            // Create student object
            const student = {
                id: Date.now(), // Unique ID
                name,
                email,
                phone,
                joinDate,
                course,
                amount: parseFloat(amount),
                paymentMethod,
                paymentStatus,
                dueDate,
                notes,
                attendance: [],
                createdAt: new Date().toISOString()
            };

            // Add to array
            students.push(student);
            
            // Save to localStorage
            saveData();
            
            // Update UI
            renderStudents();
            updateStats();
            populateStudentDropdown();
            
            // Clear form
            document.querySelectorAll('#addStudentForm input, #addStudentForm select, #addStudentForm textarea').forEach(el => {
                if (el.type !== 'button' && el.type !== 'submit') {
                    el.value = '';
                }
            });
            
            showToast(`Student "${name}" added successfully!`, 'success');
        }

        // Render students table
        function renderStudents(filteredStudents = null) {
            const studentsToRender = filteredStudents || students;
            studentsTableBody.innerHTML = '';
            
            if (studentsToRender.length === 0) {
                studentsTableBody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center" style="padding: 40px;">
                            <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 10px; color: var(--gray);"></i>
                            <p>No students found. Add your first student above.</p>
                        </td>
                    </tr>
                `;
                document.getElementById('studentCount').textContent = '0';
                return;
            }
            
            studentsToRender.forEach(student => {
                // Check if payment is overdue
                const isOverdue = student.paymentStatus === 'Pending' && 
                                  student.dueDate && 
                                  new Date(student.dueDate) < new Date();
                
                let statusClass = 'status-pending';
                let statusText = student.paymentStatus;
                
                if (student.paymentStatus === 'Paid') {
                    statusClass = 'status-paid';
                } else if (isOverdue) {
                    statusClass = 'status-overdue';
                    statusText = 'Overdue';
                } else if (student.paymentStatus === 'Partial') {
                    statusClass = 'status-pending';
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <strong>${student.name}</strong>
                        ${student.email ? `<div style="font-size: 0.85rem; color: var(--gray);">${student.email}</div>` : ''}
                    </td>
                    <td>${student.course}</td>
                    <td>${formatDate(student.joinDate)}</td>
                    <td>$${student.amount.toFixed(2)}</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td>${student.dueDate ? formatDate(student.dueDate) : 'N/A'}</td>
                    <td class="actions">
                        <button class="btn btn-sm btn-primary" onclick="viewProfile(${student.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-warning" onclick="editStudent(${student.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-success" onclick="generateInvoice(${student.id})">
                            <i class="fas fa-file-invoice"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteStudent(${student.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                studentsTableBody.appendChild(row);
            });
            
            document.getElementById('studentCount').textContent = studentsToRender.length;
        }

        // Update dashboard statistics
        function updateStats() {
            const total = students.length;
            const paid = students.filter(s => s.paymentStatus === 'Paid').length;
            const pending = students.filter(s => s.paymentStatus === 'Pending' || s.paymentStatus === 'Partial').length;
            const overdue = students.filter(s => 
                s.paymentStatus === 'Pending' && 
                s.dueDate && 
                new Date(s.dueDate) < new Date()
            ).length;
            
            document.getElementById('totalStudents').textContent = total;
            document.getElementById('paidStudents').textContent = paid;
            document.getElementById('pendingStudents').textContent = pending;
            document.getElementById('overdueStudents').textContent = overdue;
        }

        // View student profile
        function viewProfile(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            // Calculate attendance stats
            const totalSessions = student.attendance.length;
            const presentCount = student.attendance.filter(a => a.status === 'Present').length;
            const attendanceRate = totalSessions > 0 ? Math.round((presentCount / totalSessions) * 100) : 0;
            
            // Get student sessions
            const studentSessions = sessions.filter(s => s.studentId === studentId);
            
            document.getElementById('profileContent').innerHTML = `
                <div class="d-flex justify-between align-center mb-4">
                    <div>
                        <h3 style="margin-bottom: 5px;">${student.name}</h3>
                        <p style="color: var(--gray);">${student.course} • Joined ${formatDate(student.joinDate)}</p>
                    </div>
                    <div class="text-center">
                        <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">${attendanceRate}%</div>
                        <div style="font-size: 0.9rem;">Attendance Rate</div>
                    </div>
                </div>
                
                <div class="form-grid mb-4">
                    <div class="form-group">
                        <label>Email</label>
                        <div>${student.email || 'N/A'}</div>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <div>${student.phone || 'N/A'}</div>
                    </div>
                    <div class="form-group">
                        <label>Payment Status</label>
                        <div><span class="status ${student.paymentStatus === 'Paid' ? 'status-paid' : 'status-pending'}">${student.paymentStatus}</span></div>
                    </div>
                    <div class="form-group">
                        <label>Amount Due</label>
                        <div><strong>$${student.amount.toFixed(2)}</strong></div>
                    </div>
                </div>
                
                <div class="form-group mb-4">
                    <label>Notes</label>
                    <div>${student.notes || 'No notes available.'}</div>
                </div>
                
                <h4 class="mb-3">Attendance History</h4>
                ${totalSessions === 0 ? 
                    '<p>No attendance records yet.</p>' : 
                    `<div>Present: ${presentCount} / ${totalSessions} sessions</div>
                     <div class="mt-2">
                        <button class="btn btn-sm btn-success" onclick="markAttendance(${studentId}, 'Present')">
                            <i class="fas fa-check"></i> Mark Present
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="markAttendance(${studentId}, 'Absent')">
                            <i class="fas fa-times"></i> Mark Absent
                        </button>
                     </div>`
                }
                
                ${studentSessions.length > 0 ? `
                    <h4 class="mt-4 mb-3">Upcoming Sessions</h4>
                    <ul>
                        ${studentSessions.slice(0, 3).map(session => `
                            <li>${formatDate(session.date)} at ${session.time} (${session.duration} min)</li>
                        `).join('')}
                    </ul>
                ` : ''}
            `;
            
            openModal('profileModal');
        }

        // Edit student
        function editStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            document.getElementById('editContent').innerHTML = `
                <div class="form-grid">
                    <div class="form-group">
                        <label for="editName">Full Name *</label>
                        <input type="text" id="editName" value="${student.name}" placeholder="Enter full name">
                    </div>
                    <div class="form-group">
                        <label for="editEmail">Email Address</label>
                        <input type="email" id="editEmail" value="${student.email || ''}" placeholder="student@example.com">
                    </div>
                    <div class="form-group">
                        <label for="editCourse">Course *</label>
                        <select id="editCourse">
                            <option value="Web Development" ${student.course === 'Web Development' ? 'selected' : ''}>Web Development</option>
                            <option value="Data Science" ${student.course === 'Data Science' ? 'selected' : ''}>Data Science</option>
                            <option value="Digital Marketing" ${student.course === 'Digital Marketing' ? 'selected' : ''}>Digital Marketing</option>
                            <option value="UI/UX Design" ${student.course === 'UI/UX Design' ? 'selected' : ''}>UI/UX Design</option>
                            <option value="Business Analytics" ${student.course === 'Business Analytics' ? 'selected' : ''}>Business Analytics</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editAmount">Amount ($) *</label>
                        <input type="number" id="editAmount" value="${student.amount}" min="0" step="10">
                    </div>
                    <div class="form-group">
                        <label for="editPaymentStatus">Payment Status *</label>
                        <select id="editPaymentStatus">
                            <option value="Paid" ${student.paymentStatus === 'Paid' ? 'selected' : ''}>Paid</option>
                            <option value="Pending" ${student.paymentStatus === 'Pending' ? 'selected' : ''}>Pending</option>
                            <option value="Partial" ${student.paymentStatus === 'Partial' ? 'selected' : ''}>Partial Payment</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editDueDate">Due Date</label>
                        <input type="date" id="editDueDate" value="${student.dueDate || ''}">
                    </div>
                </div>
                <div class="form-group">
                    <label for="editNotes">Additional Notes</label>
                    <textarea id="editNotes" rows="3">${student.notes || ''}</textarea>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="saveStudentEdit(${studentId})">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <button class="btn" onclick="closeModal('editModal')">Cancel</button>
                </div>
            `;
            
            openModal('editModal');
        }

        // Save edited student
        function saveStudentEdit(studentId) {
            const studentIndex = students.findIndex(s => s.id === studentId);
            if (studentIndex === -1) return;
            
            const updatedStudent = {
                ...students[studentIndex],
                name: document.getElementById('editName').value.trim(),
                email: document.getElementById('editEmail').value.trim(),
                course: document.getElementById('editCourse').value,
                amount: parseFloat(document.getElementById('editAmount').value),
                paymentStatus: document.getElementById('editPaymentStatus').value,
                dueDate: document.getElementById('editDueDate').value,
                notes: document.getElementById('editNotes').value.trim()
            };
            
            // Validate
            if (!updatedStudent.name || !updatedStudent.course || !updatedStudent.amount) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            students[studentIndex] = updatedStudent;
            saveData();
            renderStudents();
            updateStats();
            closeModal('editModal');
            showToast('Student updated successfully', 'success');
        }

        // Delete student
        function deleteStudent(studentId) {
            if (!confirm('Are you sure you want to delete this student? This action cannot be undone.')) {
                return;
            }
            
            const studentIndex = students.findIndex(s => s.id === studentId);
            if (studentIndex === -1) return;
            
            const studentName = students[studentIndex].name;
            students.splice(studentIndex, 1);
            
            // Also delete associated sessions
            sessions = sessions.filter(s => s.studentId !== studentId);
            
            saveData();
            renderStudents();
            updateStats();
            populateStudentDropdown();
            renderSessions();
            showToast(`Student "${studentName}" deleted successfully`, 'success');
        }

        // Mark attendance
        function markAttendance(studentId, status) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            student.attendance.push({
                date: new Date().toISOString().split('T')[0],
                status: status
            });
            
            saveData();
            viewProfile(studentId); // Refresh profile view
            showToast(`Attendance marked as ${status}`, 'success');
        }

        // Generate invoice
        function generateInvoice(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const invoiceNumber = 'INV-' + Date.now().toString().slice(-6);
            const issueDate = new Date().toISOString().split('T')[0];
            
            document.getElementById('invoiceContent').innerHTML = `
                <div class="invoice">
                    <div class="invoice-header">
                        <div>
                            <h2>INVOICE</h2>
                            <p><strong>Invoice #:</strong> ${invoiceNumber}</p>
                            <p><strong>Issue Date:</strong> ${formatDate(issueDate)}</p>
                        </div>
                        <div style="text-align: right;">
                            <h3>LionFuel Academy</h3>
                            <p>123 Education Street</p>
                            <p>Knowledge City, KC 10101</p>
                            <p>contact@lionfuel.edu</p>
                        </div>
                    </div>
                    
                    <div style="margin: 30px 0;">
                        <div style="margin-bottom: 15px;">
                            <strong>Bill To:</strong>
                            <p>${student.name}</p>
                            ${student.email ? `<p>${student.email}</p>` : ''}
                            ${student.phone ? `<p>${student.phone}</p>` : ''}
                        </div>
                    </div>
                    
                    <div class="invoice-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Course</th>
                                    <th>Join Date</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Tuition Fee - ${student.course}</td>
                                    <td>${student.course}</td>
                                    <td>${formatDate(student.joinDate)}</td>
                                    <td>$${student.amount.toFixed(2)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="invoice-total">
                        <p>Total Amount: <strong>$${student.amount.toFixed(2)}</strong></p>
                        <p>Status: <span class="status ${student.paymentStatus === 'Paid' ? 'status-paid' : 'status-pending'}">${student.paymentStatus}</span></p>
                        ${student.dueDate ? `<p>Due Date: ${formatDate(student.dueDate)}</p>` : ''}
                    </div>
                    
                    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd;">
                        <p><strong>Payment Instructions:</strong></p>
                        <p>Please make payment via ${student.paymentMethod} within 7 days of invoice date.</p>
                        <p>Thank you for choosing LionFuel Academy!</p>
                    </div>
                </div>
            `;
            
            openModal('invoiceModal');
        }

        // Print invoice
        function printInvoice() {
            const printContent = document.getElementById('invoiceContent').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = printContent;
            window.print();
            document.body.innerHTML = originalContent;
            
            // Re-initialize the UI
            init();
        }

        // Schedule a session
        function scheduleSession() {
            const studentId = parseInt(sessionStudentSelect.value);
            const date = document.getElementById('sessionDate').value;
            const time = document.getElementById('sessionTime').value;
            const duration = document.getElementById('sessionDuration').value;
            const notes = document.getElementById('sessionNotes').value.trim();
            
            // Validation
            if (!studentId || !date || !time) {
                showToast('Please select a student, date, and time', 'error');
                return;
            }
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const session = {
                id: Date.now(),
                studentId,
                studentName: student.name,
                date,
                time,
                duration: parseInt(duration),
                notes,
                status: 'Scheduled',
                createdAt: new Date().toISOString()
            };
            
            sessions.push(session);
            saveData();
            renderSessions();
            generateCalendar();
            
            // Clear form
            document.getElementById('sessionDate').value = '';
            document.getElementById('sessionTime').value = '';
            document.getElementById('sessionNotes').value = '';
            
            showToast(`Session scheduled for ${student.name}`, 'success');
        }

        // Generate session message
        function generateSessionMessage() {
            const studentId = parseInt(sessionStudentSelect.value);
            const date = document.getElementById('sessionDate').value;
            const time = document.getElementById('sessionTime').value;
            const duration = document.getElementById('sessionDuration').value;
            
            if (!studentId || !date || !time) {
                showToast('Please select a student, date, and time first', 'error');
                return;
            }
            
            const student = students.find(s => s.id === studentId);
            const formattedDate = formatDate(date);
            const formattedTime = formatTime(time);
            
            const message = `Hello ${student.name},

This is a reminder about your upcoming session at LionFuel Academy.

Date: ${formattedDate}
Time: ${formattedTime}
Duration: ${duration} minutes

Please ensure you have completed any pre-session assignments and have the necessary materials ready.

If you need to reschedule, please contact us at least 24 hours in advance.

We look forward to our session!

Best regards,
LionFuel Academy Team
contact@lionfuel.edu
(123) 456-7890`;
            
            document.getElementById('messageContent').textContent = message;
            document.getElementById('sessionMessage').classList.remove('hidden');
        }

        // Copy session message to clipboard
        function copySessionMessage() {
            const message = document.getElementById('messageContent').textContent;
            navigator.clipboard.writeText(message).then(() => {
                showToast('Message copied to clipboard!', 'success');
            });
        }

        // Render sessions table
        function renderSessions() {
            sessionsTableBody.innerHTML = '';
            
            // Sort sessions by date (soonest first)
            const sortedSessions = [...sessions].sort((a, b) => {
                const dateA = new Date(`${a.date}T${a.time}`);
                const dateB = new Date(`${b.date}T${b.time}`);
                return dateA - dateB;
            });
            
            if (sortedSessions.length === 0) {
                sessionsTableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center" style="padding: 40px;">
                            <i class="fas fa-calendar" style="font-size: 2rem; margin-bottom: 10px; color: var(--gray);"></i>
                            <p>No sessions scheduled. Schedule your first session above.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            sortedSessions.forEach(session => {
                // Check if session is upcoming or past
                const sessionDateTime = new Date(`${session.date}T${session.time}`);
                const now = new Date();
                const isPast = sessionDateTime < now;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${session.studentName}</td>
                    <td>${formatDate(session.date)}</td>
                    <td>${formatTime(session.time)}</td>
                    <td>${session.duration} min</td>
                    <td>
                        <span class="status ${isPast ? 'status-pending' : 'status-paid'}">
                            ${isPast ? 'Completed' : 'Upcoming'}
                        </span>
                    </td>
                    <td class="actions">
                        <button class="btn btn-sm btn-danger" onclick="deleteSession(${session.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                sessionsTableBody.appendChild(row);
            });
        }

        // Delete a session
        function deleteSession(sessionId) {
            if (!confirm('Are you sure you want to delete this session?')) {
                return;
            }
            
            const sessionIndex = sessions.findIndex(s => s.id === sessionId);
            if (sessionIndex === -1) return;
            
            sessions.splice(sessionIndex, 1);
            saveData();
            renderSessions();
            generateCalendar();
            showToast('Session deleted successfully', 'success');
        }

        // Populate student dropdown for sessions
        function populateStudentDropdown() {
            sessionStudentSelect.innerHTML = '<option value="">Select Student</option>';
            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.name} (${student.course})`;
                sessionStudentSelect.appendChild(option);
            });
        }

        // Generate calendar
        function generateCalendar() {
            const calendarGrid = document.querySelector('.calendar-grid');
            // Clear existing dates (keep day headers)
            while (calendarGrid.children.length > 7) {
                calendarGrid.removeChild(calendarGrid.lastChild);
            }
            
            // Update month display
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('currentMonth').textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            // Get first day of month and total days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Add empty cells for days before the first day
            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.classList.add('calendar-date');
                emptyDiv.style.visibility = 'hidden';
                calendarGrid.appendChild(emptyDiv);
            }
            
            // Add cells for each day of the month
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dateDiv = document.createElement('div');
                dateDiv.classList.add('calendar-date');
                dateDiv.textContent = day;
                
                // Check if today
                if (isCurrentMonth && day === today.getDate()) {
                    dateDiv.classList.add('today');
                }
                
                // Check if there are sessions on this day
                const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const daySessions = sessions.filter(s => s.date === dateStr);
                
                if (daySessions.length > 0) {
                    dateDiv.classList.add('has-session');
                    const sessionDot = document.createElement('div');
                    sessionDot.classList.add('session-dot');
                    sessionDot.title = `${daySessions.length} session(s) scheduled`;
                    dateDiv.appendChild(sessionDot);
                    
                    // Add click to view sessions
                    dateDiv.onclick = () => {
                        alert(`Sessions on ${dateStr}:\n${daySessions.map(s => `• ${s.studentName} at ${s.time}`).join('\n')}`);
                    };
                }
                
                calendarGrid.appendChild(dateDiv);
            }
        }

        // Navigate calendar months
        function prevMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        // Filter and search students
        function filterStudents() {
            const searchTerm = searchInput.value.toLowerCase();
            const statusFilter = filterStatus.value;
            const courseFilter = filterCourse.value;
            
            const filtered = students.filter(student => {
                // Search term filter
                const matchesSearch = !searchTerm || 
                    student.name.toLowerCase().includes(searchTerm) ||
                    (student.email && student.email.toLowerCase().includes(searchTerm)) ||
                    student.course.toLowerCase().includes(searchTerm);
                
                // Status filter
                const matchesStatus = statusFilter === 'all' || student.paymentStatus === statusFilter;
                
                // Course filter
                const matchesCourse = courseFilter === 'all' || student.course === courseFilter;
                
                return matchesSearch && matchesStatus && matchesCourse;
            });
            
            renderStudents(filtered);
        }

        // Export data
        function exportData() {
            const dataStr = JSON.stringify({
                students: students,
                sessions: sessions,
                exportedAt: new Date().toISOString()
            }, null, 2);
            
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `lionfuel_data_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Data exported successfully', 'success');
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.className = 'toast';
            
            // Set type-specific class and icon
            let iconClass = 'fas fa-check-circle';
            if (type === 'error') {
                iconClass = 'fas fa-exclamation-circle';
                toast.classList.add('toast-error');
            } else if (type === 'info') {
                iconClass = 'fas fa-info-circle';
                toast.classList.add('toast-info');
            } else {
                toast.classList.add('toast-success');
            }
            
            toast.querySelector('i').className = iconClass;
            toast.classList.add('show');
            
            // Hide after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('lionfuel_students', JSON.stringify(students));
            localStorage.setItem('lionfuel_sessions', JSON.stringify(sessions));
        }

        // Format date
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Format time
        function formatTime(timeString) {
            if (!timeString) return 'N/A';
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const displayHour = hour % 12 || 12;
            return `${displayHour}:${minutes} ${ampm}`;
        }

        // Load sample data for demonstration
        function loadSampleData() {
            const sampleStudents = [
                {
                    id: 1001,
                    name: 'Alex Johnson',
                    email: 'alex.j@example.com',
                    phone: '+1 (234) 567-8901',
                    joinDate: '2023-05-15',
                    course: 'Web Development',
                    amount: 1200,
                    paymentMethod: 'Credit Card',
                    paymentStatus: 'Paid',
                    dueDate: '2023-06-15',
                    notes: 'Excellent student, always completes assignments on time.',
                    attendance: [
                        { date: '2023-05-20', status: 'Present' },
                        { date: '2023-05-27', status: 'Present' },
                        { date: '2023-06-03', status: 'Present' }
                    ]
                },
                {
                    id: 1002,
                    name: 'Maria Garcia',
                    email: 'maria.g@example.com',
                    phone: '+1 (345) 678-9012',
                    joinDate: '2023-06-01',
                    course: 'Data Science',
                    amount: 1500,
                    paymentMethod: 'Bank Transfer',
                    paymentStatus: 'Pending',
                    dueDate: '2023-07-01',
                    notes: 'Needs extra help with statistics concepts.',
                    attendance: [
                        { date: '2023-06-05', status: 'Present' },
                        { date: '2023-06-12', status: 'Absent' },
                        { date: '2023-06-19', status: 'Present' }
                    ]
                },
                {
                    id: 1003,
                    name: 'David Smith',
                    email: 'david.s@example.com',
                    phone: '+1 (456) 789-0123',
                    joinDate: '2023-04-10',
                    course: 'Digital Marketing',
                    amount: 900,
                    paymentMethod: 'PayPal',
                    paymentStatus: 'Partial',
                    dueDate: '2023-05-10',
                    notes: 'Paid $500, remaining $400 due next month.',
                    attendance: [
                        { date: '2023-04-15', status: 'Present' },
                        { date: '2023-04-22', status: 'Present' },
                        { date: '2023-04-29', status: 'Present' },
                        { date: '2023-05-06', status: 'Present' }
                    ]
                }
            ];
            
            const sampleSessions = [
                {
                    id: 2001,
                    studentId: 1001,
                    studentName: 'Alex Johnson',
                    date: new Date().toISOString().split('T')[0],
                    time: '14:00',
                    duration: 60,
                    notes: 'Advanced JavaScript concepts',
                    status: 'Scheduled'
                },
                {
                    id: 2002,
                    studentId: 1002,
                    studentName: 'Maria Garcia',
                    date: new Date(Date.now() + 86400000).toISOString().split('T')[0], // Tomorrow
                    time: '10:30',
                    duration: 90,
                    notes: 'Python pandas library',
                    status: 'Scheduled'
                },
                {
                    id: 2003,
                    studentId: 1003,
                    studentName: 'David Smith',
                    date: new Date(Date.now() + 172800000).toISOString().split('T')[0], // Day after tomorrow
                    time: '16:00',
                    duration: 60,
                    notes: 'SEO optimization techniques',
                    status: 'Scheduled'
                }
            ];
            
            students = sampleStudents;
            sessions = sampleSessions;
            saveData();
            showToast('Sample data loaded successfully', 'info');
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('active');
                }
            });
        };

        // Initialize when page loads
        window.onload = init;
    </script>
</body>
</html>
